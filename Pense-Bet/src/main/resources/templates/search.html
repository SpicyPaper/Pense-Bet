<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/head :: head"></head>

<body>
	<div th:replace="fragments/header :: header"></div>
	
	<h1>Search</h1>
	<!-- Search form -->
	<form th:action="@{/search/1}" method="post">
		<div>
			<label>Bet's subject</label> <input type="text" name="betSubject" />
			<label>Bet's owner</label> <div th:if="${#lists.size(users) &gt; 0}">
				<div class="form-row">
					<div class="col-md-6 pr-3">
						<select class="form-control form-control-lg" th:name="searchedOwner">
							<option th:each="owner : ${users}" th:value="${owner.id}" th:utext="${owner.nickname}" />
						</select>
					</div>
				</div>
			</div>
			<div th:unless="${#lists.size(users) &gt; 0}">There is no bet owner to display</div>
		</div>
		
		<button type="submit">Search bet</button>
	</form>
	
	<!-- Search results -->
	<!-- Adapted from: https://dzone.com/articles/simple-pagination-example-with-spring-data-and-thy -->
	<div class="row" th:fragment="search-list"
		th:if="${searchList != null && !searchList.isEmpty()}">
		<div class="col-md-2"></div>
		<div class="col-md-8">
			<table id="link-list" class="table table-striped table-bordered"
				style="width: 100%">
				<thead>
					<tr>
						<th>ID</th>
						<th>Amount</th>
						<th>Creation date</th>
						<th>Ending date</th>
						<th>Result</th>
						<th>Subject</th>
						<th>Owner</th>
						<th>Sate</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="bet : ${searchList}">
						<td th:text="${{bet.id}}"></td>
						<td th:text="${{bet.amount}}"></td>
						<td th:text="${{bet.creationDate}}"></td>
						<td th:text="${{bet.endingDate}}"></td>
						<td th:text="${{bet.result}}"></td>
						<td th:text="${{bet.subject}}"></td>
						<td th:text="${{bet.owner.nickname}}"></td>
						<td th:text="${{bet.state.name}}"></td>
						<td><a th:href="@{/bet/{betId}(betId=${bet.id})}">Detail</a></td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="col-md-2"></div>
	</div>
	<div class="row" th:fragment="pagination">
		<div class="col-md-2"></div>
		<div class="col-md-8">
			<nav aria-label="Pagination">
				<ul class="pagination justify-content-center">
					<li class="page-item" th:each="pageNumber : ${pageNumbers}">
						<a class="page-link" th:href="@{|/bet/user/created/active/${pageNumber}|}" th:text=${pageNumber}>1</a>
					</li>
				</ul>
			</nav>
		</div>
		<div class="col-md-2"></div>
	</div>
	
	<div th:replace="fragments/endbody :: endbody"></div>
</body>
</html>